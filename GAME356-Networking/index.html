<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>GAME 356 - Networking</title>

<link rel="stylesheet" type="text/css" href="../HumberStyle.css" media="all"/>
<body>

	<div id="header"> <b>GAME 356-Networking</b><br /></div>
	<ul class="nav">
		<li class="nav"><a class="nav" href="../index.html"> Home </a><br /></li>
		<li class="nav"><a class="nav" href="../MySchedule"> My schedule </a><br /></li>
		<li class="nav"><a class="nav" href="../AboutMe"> About me </a><br /></li>
		<li class="nav"><a class="nav" href="../ETC"> /etc </a><br /></li>
	</ul>
	


	<div id="rightsidebar">
		<H2><u>Administrative Stuff</u></H2>
		<a href="../Rubrics/programmingRubric.html"> Rubric for all programming assignments</a> <br />
	</div>
	<h3>Welcome to network programming - it's week four and I feel like we just got started</h3>
	<p>
	I found these pages out there in the ether. Let's take a look. <br/>
	<a class="nav" href="https://wiki.libsdl.org/SDL3_net/CategorySDLNet">SDL3 Wiki</a><br />
	<a class="nav" href="https://github.com/libsdl-org/sdlwiki">Github SDL3</a><br />

	I cleaned up the code from last week a bit. Let's start again. <br/>
	<a class="nav" href="../CodeDepot/UDPClient.zip">UDPClient.zip</a><br />
	<a class="nav" href="../CodeDepot/UDPServer.zip">UDPServer.zip</a><br />
	</p>


	<p>
    <H2>Assignment 0:(0/0)</H2><br/>
		Create a TCP/IP connection between two computers. <br/>
		Here's some starter code.<br/>
		<a class="nav" href="../CodeDepot/TCPClient.zip">TCPClient.zip</a><br />
		<a class="nav" href="../CodeDepot/TCPServer.zip">TCPServer.zip</a><br />
		</p>

	<p>
		Since Umer, Z and N plus second year M have pushed us into the unknown world of SDL3, I guess we'll work this out together. <br/>
		The theory of this stuff I can explain easily. The new API? Let's do it. 

	</p>
	<p>
<H2>Assignment 1:(20/25)</H2><br/>
	Create a chat system where the client and the server can write messages back and forth. The trick is in how to loop the send and recieve. <br/>
	For the extra credit: Multi thread the program - yes, you can get credit for the engine class.  
	</p>


<p>
<H2>Assignment 2:(20/25)</H2><br/>
	Let's see if we can read a website <br/>
	<a class="nav" href="../CodeDepot/ReadWebPages.zip">ReadWebPages.zip</a><br />
	For the extra credit: Do it with SSL  
	</p>


<p>	
	<H2>Assignment 3:</H2><br/>
	Vocabulary quiz  <br/>
</p>

<p>
<H2>Assignment 4:(20/25)</H2><br/>
	<p>
	Build UDP project in Unity or Unreal to communicate with C++. No chat silliness, this time send 
	positional data including orientation. <br/>
	</p>
    <p> 
     I wanted to demonstrate how to serialize data at the byte level. Here is the finalized code I was writing in class. <br/>
     <a class="nav" href="../CodeDepot/UDPServer - wData.zip">UDPServer - wData.zip</a><br />
     <a class="nav" href="../CodeDepot/UDPClient - wData.zip">UDPClient - wData.zip</a><br />
     <a class="nav" href="../CodeDepot/UDPClientC# - wData.zip">UDPClientC# - wData.zip</a><br />
	<p>
	In today's class I asked Cody to show you some code on how to make UDP work in Unity<br/>
	<textarea class="code" cols=10 rows=100 spellcheck="false">

using UnityEngine;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System;
using System.Text;

public class UdpClientManager : MonoBehaviour
{
    // - Singleton, for referencing from other classes
    public static UdpClientManager Instance;

    private UdpClient m_Client;
    private Thread receiverThread;
    private const int serverPort = 0x1A2B;
    private const string serverIp = "192.168.1.13";

    float timer = 2f;

    private void Awake()
    {
        // - Prevent Duplicates
        if (Instance != null) Destroy(this.gameObject);

        // - Initialize Singleton
        Instance = this;
    }

    private void Start()
    {
        InitializeUDP();
    }

    private void Update()
    {
        timer -= Time.deltaTime;
    }

    private void InitializeUDP()
    {
        // - Create UDP Client in Unity
        m_Client = new UdpClient();

        // - Create background Thread for Networking Send/Receive
        receiverThread = new Thread(new ThreadStart(PingServerThread));
        receiverThread.IsBackground = true;
        receiverThread.Start();
    }

    private void PingServerThread()
    {
         
        while (true)
        {
            // - Wrapping the main code in a timer to prevent flooding of messages
            if (timer <= 0)
            {
                // - Try to ping the server
                try
                {
                    string message = "Pinging server from Unity";
                 
                    IPEndPoint anyIP = new IPEndPoint(IPAddress.Any, serverPort);
                    byte[] data = Encoding.UTF8.GetBytes(message);
                    m_Client.Send(data, data.Length, serverIp, serverPort);

                    timer = 2f;

                    Debug.Log($"Message sent to server: {message}");
                }

                // - Catch any net exceptions
                catch (SocketException e)
                {
                    Debug.Log($"Socket closed: {e.Message}");
                }

                // - Catch any other issues that might arise
                catch (Exception e)
                {
                    Debug.Log($"Received Thread Error: {e}");
                }
            }
        }
    }

    // - Because UDP Client is active when we press play, we want to close it when we stop playing
    private void OnApplicationQuit()
    {
        if (receiverThread != null) receiverThread.Abort();
        if (m_Client != null) m_Client.Close();
    }
}
</textarea>
</p>

<p>
	For the extra credit: Do it between two Unity projects or better between a Unity build and an Unreal build<br/> 
</p>
	<br /><br />

</body>
</HTML>

